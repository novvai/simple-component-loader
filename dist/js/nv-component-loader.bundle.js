!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Component=t():e.Component=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.r(t);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&o(e.prototype,t),n&&o(e,n)}(e,[{key:"load",value:function(e){var t=this;return this.normalize(e),new Promise(function(e,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){4==this.readyState&&200==this.status&&e(this.responseText)},o.open("GET",t.componentPath,!0),o.send()})}},{key:"normalize",value:function(e){this.componentPath=e;var t=this.componentPath.split(".");try{"html"!==t[t.length-1]&&(this.componentPath="".concat(this.componentPath,".html"))}catch(e){console.log(e)}}}]),e}();function a(e){var t=document.querySelectorAll(e),n=t.length;return 1==n?t[0]:n>1?t:null}function i(e,t){var n=e.querySelectorAll(t),o=n.length;return 1==o?n[0]:o>1?n:null}function c(e){var t=document.createElement("div");return e=e.trim(),t.innerHTML=e,t}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.component=new r,this.meta={title:"",description:"",keywords:""},this.metaSelectors=['meta[name="keywords"]',"title",'meta[name="description"]'],this.template="",this.componentVariables={},this.container=a('[data-bi-location="app"]'),this.setupObserver()}return function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(e,[{key:"setContainer",value:function(e){this.container=a('[data-bi-location="'.concat(e,'"]'))}},{key:"make",value:function(){return this.renderContent()}},{key:"loaded",value:function(){}},{key:"setupObserver",value:function(){var e=this;this.observer=new MutationObserver(function(t,n){e.loaded(),e.observer.disconnect()})}},{key:"renderContent",value:function(){var e=this;this.component.load(this.template).then(function(t){e.template=t,e.makeFromTemplate(),e.iterateTemplate(),e.addMeta(),e.addToContainer(),e.attachHandlers()})}},{key:"makeFromTemplate",value:function(){for(var e in this.componentVariables)this.template=this.template.replace("@|".concat(e,"|@"),this.componentVariables[e]);this.template=c(this.template)}},{key:"iterateTemplate",value:function(){var e=this,t=i(this.template,"[data-bi-for]");null!==t&&(void 0==t.length&&(t=[t]),t.forEach(function(t){var n=document.createElement("div"),o=t.parentNode;n.appendChild(t);var r=n.firstChild.innerHTML;try{e.componentVariables[t.getAttribute("data-bi-for")].forEach(function(e){var t=r;for(var n in e)t=t.replace("@|".concat(n,"|@"),e[n]);o.appendChild(c(t).firstChild)})}catch(e){console.error("Template variable has been specified, but no Component variable is provided : ".concat(t.getAttribute("data-bi-for")))}}))}},{key:"attachHandlers",value:function(){var e=this,t=i(this.container,"[data-bi-trigger]");null!==t&&(void 0===t.length&&(t=[t]),t.forEach(function(t){var n=t.getAttribute("data-bi-trigger");try{t.addEventListener("click",e[n].bind(e))}catch(e){console.error('The method "'.concat(n,'" that you try to invoke does not exist, you can add such behaviour using .addHandler(handlerName, callback)'))}}))}},{key:"addToContainer",value:function(){var e=this;this.observer.observe(this.container,{childList:!0}),this.container.innerHTML="",this.template.childNodes.forEach(function(t){e.container.appendChild(t)})}},{key:"appendMetaSelectors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==e||void 0==e?this:(this.metaSelectors.push(),this)}},{key:"addMeta",value:function(){var e=this;this.metaSelectors.forEach(function(t){var n=a(t);if(null!=n)if("title"===t)n.innerHTML=e.meta.hasOwnProperty(t)?e.meta[t]:"";else{var o=e.meta[n.getAttribute("name")];null!=o&&void 0!=o&&n.setAttribute("content",o)}})}}]),e}();t.default=u}]).default});